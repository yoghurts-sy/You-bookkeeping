require("../../common/manifest.js")
require("../../common/vendor.js")
global.webpackJsonpMpvue([1],{589:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(35),o=s.n(n),i=s(590);o.a.config.errorHandler=function(t){console&&console.error&&console.error(t)},new o.a(i.a).$mount()},590:function(t,e,s){"use strict";var n=s(592),o=s(614),i=!1;var a=function(t){i||s(591)},r=s(17)(n.a,o.a,a,"data-v-7efcd81b",null);r.options.__file="src\\pages\\index\\index.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] index.vue: functional components are not supported with templates, they should use render functions."),e.a=r.exports},591:function(t,e){},592:function(t,e,s){"use strict";var n=s(593),o=s(597);s(140);e.a={components:{login:n.a,accounts:o.a},data:function(){return{notLogin:!0}},onLoad:function(t){"true"===t.logout&&(this.notLogin=!0)},mounted:function(){wx.getStorageSync("userinfo")?(this.notLogin=!1,this.getRecord()):wx.hideTabBar()},methods:{loginSuccess:function(){this.notLogin=!1,wx.showTabBar(),wx.showToast({title:"登录成功",icon:"success",mask:!0,duration:2e3}),this.getRecord()},getRecord:function(){var t=this;wx.cloud.callFunction({name:"all",data:{userid:wx.getStorageSync("userinfo").openId}}).then(function(e){t.$refs.accounts.items=e.result.reverse(),t.$refs.accounts.processItemInfo()})}}}},593:function(t,e,s){"use strict";var n=s(595),o=s(596),i=!1;var a=function(t){i||s(594)},r=s(17)(n.a,o.a,a,null,null);r.options.__file="src\\components\\index\\login.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] login.vue: functional components are not supported with templates, they should use render functions."),e.a=r.exports},594:function(t,e){},595:function(t,e,s){"use strict";var n=s(140);e.a={methods:{getUserInfo:function(t){var e=this,s=t.target.userInfo;n.a.loginUrl;wx.login({success:function(t){t.code?wx.cloud.callFunction({name:"signin",data:{code:t.code}}).then(function(t){var n=t.result;s.openId=JSON.parse(n.msg).openid,wx.setStorage({key:"userinfo",data:s}),e.$emit("loginsuccess")}):console.log("登录失败！"+t.errMsg)}})}}}},596:function(t,e,s){"use strict";var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("button",{attrs:{"open-type":"getUserInfo",eventid:"0"},on:{getuserinfo:this.getUserInfo}},[this._v("授权登录")])],1)};n._withStripped=!0;var o={render:n,staticRenderFns:[]};e.a=o},597:function(t,e,s){"use strict";var n=s(599),o=s(613),i=!1;var a=function(t){i||s(598)},r=s(17)(n.a,o.a,a,null,null);r.options.__file="src\\components\\index\\accounts.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] accounts.vue: functional components are not supported with templates, they should use render functions."),e.a=r.exports},598:function(t,e){},599:function(t,e,s){"use strict";var n=s(132),o=s.n(n),i=s(242),a=s(600),r=(s.n(a),s(601)),c=null,u=0,l=0,d=0;e.a={data:function(){return{currentUser:{},items:[],processedItems:[],income:0,pay:0,surplus:0,echarts:a,onInit:null,options:null}},components:{mpvueEcharts:r.a},onShareAppMessage:function(){},mounted:function(){this.processItemInfo()},updated:function(){this.onInit=this.initChart},methods:{initChart:function(t,e,s){c=a.init(t,null,{width:e,height:s}),t.setChart(c);var n=this.options;return c.setOption(n,!0),c},processItemInfo:function(){this.processedItems=[],this.pay=0,this.income=0,this.surplus=0;for(var t=0;t<this.items.length;t++){var e={};for(var s in this.items[t])"pay"===s?(e.payEn=this.items[t].pay,e.payCn=this.getPayName(this.items[t].pay)):e[s]="category"===s?this.items[t].category.substring(0,1):this.items[t][s];e.opacity=1,e.width=100,this.processedItems.push(e),0===this.items[t].record_type?this.pay+=this.items[t].record_value:1===this.items[t].record_type&&(this.income+=this.items[t].record_value)}u=this.income,l=this.pay,this.surplus=this.income-this.pay,d=this.surplus,this.options={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"访问来源",type:"pie",radius:["80%","20%"],data:[{value:u,name:"收入"},{value:l,name:"支出"},{value:d,name:"结余"}],color:["#91CC75","#DF2A4E","#5470C6"],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},getPayName:function(t){var e=!0,s=!1,n=void 0;try{for(var a,r=o()(i.a);!(e=(a=r.next()).done);e=!0){var c=a.value;if(c.payEn===t)return c.payCn}}catch(t){s=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(s)throw n}}}}}},601:function(t,e,s){"use strict";var n=s(603),o=s(612),i=!1;var a=function(t){i||s(602)},r=s(17)(n.a,o.a,a,"data-v-3345b39f",null);r.options.__file="node_modules\\mpvue-echarts\\src\\echarts.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] echarts.vue: functional components are not supported with templates, they should use render functions."),e.a=r.exports},602:function(t,e){},603:function(t,e,s){"use strict";var n=s(604),o=s.n(n),i=s(611);function a(t){for(var e=0;e<t.mp.touches.length;e+=1){var s=t.mp.touches[e];s.offsetX=s.x,s.offsetY=s.y}return t}e.a={props:{echarts:{required:!0,type:Object,default:function(){return null}},onInit:{type:Function,default:null},canvasId:{type:String,default:"ec-canvas"},lazyLoad:{type:Boolean,default:!1},disableTouch:{type:Boolean,default:!1},throttleTouch:{type:Boolean,default:!1}},onReady:function(){this.echarts?this.lazyLoad||this.init():console.warn('组件需绑定 echarts 变量，例：<ec-canvas id="mychart-dom-bar" canvas-id="mychart-bar" :echarts="echarts"></ec-canvas>')},methods:{init:function(t){var e=this,s=wx.version.version.split(".").map(function(t){return parseInt(t,10)});if(s[0]>1||1===s[0]&&s[1]>9||1===s[0]&&9===s[1]&&s[2]>=91){var n=this.canvasId;this.ctx=wx.createCanvasContext(n);var o=new i.a(this.ctx,n);this.echarts.setCanvasCreator(function(){return o}),wx.createSelectorQuery().select("#"+n).boundingClientRect(function(s){if(s){var n=s.width,i=s.height;if("function"==typeof t?e.chart=t(o,n,i):"function"==typeof e.onInit&&(e.chart=e.onInit(o,n,i)),e.chart){var a=e.chart.getZr().handler;e.handler=a,e.processGesture=a.proxy.processGesture||function(){}}}else setTimeout(function(){return e.init()},50)}).exec()}else console.error("微信基础库版本过低，需大于等于 1.9.91。参见：https://github.com/ecomfe/echarts-for-weixin#%E5%BE%AE%E4%BF%A1%E7%89%88%E6%9C%AC%E8%A6%81%E6%B1%82")},canvasToTempFilePath:function(t){var e=this.canvasId;this.ctx.draw(!0,function(){wx.canvasToTempFilePath(o()({canvasId:e},t))})},touchStart:function(t){var e=this.disableTouch,s=this.chart;if(!e&&s&&t.mp.touches.length){var n=t.mp.touches[0];this.handler.dispatch("mousedown",{zrX:n.x,zrY:n.y}),this.handler.dispatch("mousemove",{zrX:n.x,zrY:n.y}),this.processGesture(a(t),"start")}},touchMove:function(t){var e=this.disableTouch,s=this.throttleTouch,n=this.chart,o=this.lastMoveTime;if(!e&&n&&t.mp.touches.length){if(s){var i=Date.now();if(i-o<240)return;this.lastMoveTime=i}var r=t.mp.touches[0];this.handler.dispatch("mousemove",{zrX:r.x,zrY:r.y}),this.processGesture(a(t),"change")}},touchEnd:function(t){var e=this.disableTouch,s=this.chart;if(!e&&s){var n=t.mp.changedTouches?t.mp.changedTouches[0]:{};this.handler.dispatch("mouseup",{zrX:n.x,zrY:n.y}),this.handler.dispatch("click",{zrX:n.x,zrY:n.y}),this.processGesture(a(t),"end")}}}}},612:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.canvasId?s("canvas",{staticClass:"ec-canvas",attrs:{id:t.canvasId,canvasId:t.canvasId,eventid:"0"},on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd,error:t.error}}):t._e()};n._withStripped=!0;var o={render:n,staticRenderFns:[]};e.a=o},613:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"wrap"},[s("mpvue-echarts",{attrs:{echarts:t.echarts,onInit:t.onInit,canvasId:"demo-canvas",mpcomid:"0"}})],1),t._v(" "),s("div",{staticClass:"wrapR"},[s("div",{staticClass:"wrapR-item",staticStyle:{color:"#91CC75"}},[t._v("收入:"+t._s(t.income))]),t._v(" "),s("div",{staticClass:"wrapR-item",staticStyle:{color:"#DF2A4E"}},[t._v("支出:"+t._s(t.pay))]),t._v(" "),s("div",{staticClass:"wrapR-item",staticStyle:{color:"#5470C6"}},[t._v("结余:"+t._s(t.surplus))])]),t._v(" "),s("scroll-view",{staticClass:"account-area",attrs:{"scroll-y":!0,eventid:"0"},on:{scrolltolower:t.scrolltolower,scroll:t.scroll}},[s("div",{staticClass:"item"},t._l(t.processedItems,function(e,n){return s("div",{key:n,staticClass:"item-details",style:"opacity:"+e.opacity+";width: "+e.width+"%"},[s("div",{staticClass:"item-details-left"},[s("div",{staticClass:"item-details-category"},[s("span",[t._v(t._s(e.category))])])]),t._v(" "),s("div",{staticClass:"item-details-middle"},[s("div",{staticClass:"details-top"},[s("div",{staticClass:"item-details-subcategory"},[s("span",[t._v("\n                "+t._s(e.subcategory)+"\n              ")])]),t._v(" "),s("div",{staticClass:"item-details-pay"},[s("span",{class:"pay-by-"+e.payEn},[t._v("\n              "+t._s(e.payCn)+"\n            ")])])]),t._v(" "),s("div",{staticClass:"details-bottom"},[s("div",{staticClass:"item-details-desc"},[s("span",[t._v("\n              "+t._s(e.record_desc)+"\n            ")])])])]),t._v(" "),s("div",{staticClass:"item-details-right"},[s("div",{staticClass:"item-details-value"},[s("span",{class:0===e.record_type?"out":"in"},[t._v(t._s(e.record_value))])])])])}))])],1)};n._withStripped=!0;var o={render:n,staticRenderFns:[]};e.a=o},614:function(t,e,s){"use strict";var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.notLogin?e("div",[e("login",{attrs:{eventid:"0",mpcomid:"0"},on:{loginsuccess:this.loginSuccess}})],1):e("div",{staticStyle:{"border-radius":"10px"}},[e("accounts",{ref:"accounts",attrs:{mpcomid:"1"}})],1)])};n._withStripped=!0;var o={render:n,staticRenderFns:[]};e.a=o}},[589]);