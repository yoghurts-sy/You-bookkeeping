require("../../common/manifest.js")
require("../../common/vendor.js")
global.webpackJsonpMpvue([2],{543:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(35),n=a.n(s),c=a(544);new n.a(c.a).$mount()},544:function(t,e,a){"use strict";var s=a(546),n=a(581),c=!1;var o=function(t){c||a(545)},i=a(17)(s.a,n.a,o,null,null);i.options.__file="src\\pages\\add\\index.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] index.vue: functional components are not supported with templates, they should use render functions."),e.a=i.exports},545:function(t,e){},546:function(t,e,a){"use strict";var s=a(132),n=a.n(s),c=a(568),o=a(242),i=a(569),r=a(577);a(140);e.a={components:{calculator:i.a,scrollSelector:r.a},data:function(){return{payMethod:[],selectType:"",showCalculator:!1,showSelector:!1,accountItem:{record_type:0,record_value:"0.00",category:c.a[0].name,subcategory:c.a[0].subCat[0].name,record_date:"",record_desc:"",pay:""},touchStartX:null}},created:function(){var t=!0,e=!1,a=void 0;try{for(var s,c=n()(o.a);!(t=(s=c.next()).done);t=!0){var i=s.value;this.payMethod.push({payEn:i.payEn,payCn:i.payCn,color:i.color,isSelected:!1})}}catch(t){e=!0,a=t}finally{try{!t&&c.return&&c.return()}finally{if(e)throw a}}},mounted:function(){this.getToday()},methods:{check:function(){return"0.00"===this.accountItem.record_value?(wx.showToast({title:"请填入有效收支金额",icon:"none",duration:1e3}),!1):""!==this.accountItem.pay||(wx.showToast({title:"请选择支付钱包",icon:"none",duration:1e3}),!1)},clear:function(){this.accountItem={record_type:0,record_value:"0.00",category:c.a[0].name,subcategory:c.a[0].subCat[0].name,record_date:"",record_desc:"",pay:""},this.activatePay(-1)},submit:function(){if(this.check()){var t=this;t.accountItem.userid=wx.getStorageSync("userinfo").openId,wx.cloud.callFunction({name:"add",data:{ac:t.accountItem}}).then(function(e){"ok"===e.result.msg&&(wx.showToast({title:"记账成功！",icon:"success",mask:!0,duration:2e3}),t.clear(),wx.reLaunch({url:"../index/main",success:function(t){},error:function(t){console.log(t)}}))})}},getToday:function(){var t=new Date;this.accountItem.record_date=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()},deactivateTools:function(){this.showCalculator&&(this.showCalculator=!1),this.showSelector&&(this.showSelector=!1,this.$refs.selector.close())},getCalRes:function(t){this.accountItem.record_value=t},callCalculator:function(){this.showCalculator=!this.showCalculator,this.showCalculator&&(this.showSelector=!1)},touchStart:function(t){this.touchStartX=t.pageX},touchEnd:function(t){Math.abs(t.mp.changedTouches[0].pageX-this.touchStartX)>50&&(this.accountItem.record_type=1-this.accountItem.record_type)},callCatSelector:function(){this.showSelector?(this.showSelector=!1,this.$refs.selector.close()):(this.showSelector=!0,this.showCalculator=!1,this.selectType="cat",this.$refs.selector.colCount=2,this.$refs.selector.cols=[c.a,c.a[0].subCat],this.$refs.selector.open(),this.$refs.selector.record_type="custom")},callDateSelector:function(){this.showSelector?(this.showSelector=!1,this.$refs.selector.close()):(this.showSelector=!0,this.showCalculator=!1,this.selectType="date",this.$refs.selector.dateMode(this.accountItem.record_date.split("/")),this.$refs.selector.open())},getSelectRes:function(t,e){"cat"===this.selectType&&"custom"===e?(this.accountItem.category=c.a[t[0]].name,this.accountItem.subcategory=c.a[t[0]].subCat[t[1]].name,this.$refs.selector.cols.splice(1,1,c.a[t[0]].subCat)):"date"===this.selectType&&"date"===e&&(this.accountItem.record_date=2010+t[0]+"/"+(1+t[1])+"/"+(1+t[2]))},activatePay:function(t){for(var e in this.payMethod)e===t.toString()?(this.accountItem.pay=this.payMethod[e].payEn,this.payMethod[e].isSelected=!0):this.payMethod[e].isSelected=!1}}}},568:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var s=[{name:"衣饰",subCat:[{name:"衣服"},{name:"首饰"},{name:"手表"},{name:"眼镜"}]},{name:"食物",subCat:[{name:"三餐"},{name:"零食"},{name:"饮料"},{name:"水果"},{name:"外卖"},{name:"食材"}]},{name:"住房",subCat:[{name:"房租"},{name:"房贷"},{name:"水电煤"},{name:"通讯费"},{name:"网费"},{name:"物业"},{name:"家具电器"}]},{name:"交通",subCat:[{name:"上下班"},{name:"地铁"},{name:"自家车"},{name:"火车"},{name:"轮船"},{name:"飞机"}]},{name:"日常",subCat:[{name:"洗漱用品"},{name:"餐具杯具"},{name:"厨房用品"},{name:"卫生纸"},{name:"其他"}]},{name:"女士",subCat:[{name:"化妆品"},{name:"女生用品"}]},{name:"娱乐",subCat:[{name:"手机"},{name:"其他设备"},{name:"视频会员"},{name:"游戏充值"},{name:"其他"}]},{name:"工作",subCat:[{name:"文具纸张"},{name:"书报"},{name:"学费"},{name:"学费"},{name:"书报"}]},{name:"其他",subCat:[{name:"健身锻炼"},{name:"婚嫁随份"},{name:"白事"},{name:"人情红包"},{name:"意外"}]}]},569:function(t,e,a){"use strict";var s=a(571),n=a(576),c=!1;var o=function(t){c||a(570)},i=a(17)(s.a,n.a,o,null,null);i.options.__file="src\\components\\add\\calculator.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] calculator.vue: functional components are not supported with templates, they should use render functions."),e.a=i.exports},570:function(t,e){},571:function(t,e,a){"use strict";var s=a(572),n=a.n(s);e.a={data:function(){return{cols:[["1","4","7","."],["2","5","8","0"],["3","6","9","DEL"],["+","-","*","/"]],cmd:"",calInputContent:"",calRes:0}},methods:{calInput:function(t){if(this.isCmd(t)){if(""===this.calInputContent)return;this.isCmd(this.calInputContent[this.calInputContent.length-1])?this.calInputContent=this.calInputContent.substring(0,this.calInputContent.length-1):this.calInputContent=this.calculate(this.calInputContent),this.cmd=t,this.calInputContent+=t}else"DEL"===t?this.calInputContent=this.calInputContent.substring(0,this.calInputContent.length-1):this.calInputContent+=t},isCmd:function(t){return"+"===t||"-"===t||"*"===t||"/"===t},calculate:function(t){var e=t.split(/['+','\-','*','/']/);if(e.length>1){if(2===e.length&&""===e[1])return parseFloat(e[0]).toFixed(2);var a=e.slice(-2),s=n()(a,2),c=s[0],o=s[1];c="-"===this.calInputContent[0]?-1*parseFloat(c):parseFloat(c);var i=0;if(0===(o=parseFloat(o)))return"Inf";switch(this.cmd){case"+":i=c+o;break;case"-":i=c-o;break;case"*":i=c*o;break;case"/":i=c/o}return i.toFixed(2)}return 1===e.length?""===e[0]?"0.00":parseFloat(e).toFixed(2):"0.00"},submit:function(){this.calRes=this.calculate(this.calInputContent),this.calInputContent="",this.$emit("res",this.calRes)}}}},576:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"calculator"},[a("div",{staticClass:"cal-screen"},[a("span",[t._v(t._s(t.calInputContent))])]),t._v(" "),a("div",{staticClass:"cal-panel"},[t._l(t.cols,function(e,s){return a("div",{key:s,staticClass:"cal-col"},t._l(e,function(e,n){return a("div",{key:n,staticClass:"cal-btn",attrs:{eventid:"0_"+s+"-"+n},on:{click:function(a){t.calInput(e)}}},[a("span",[t._v(t._s(e))])])}))}),t._v(" "),a("div",{staticClass:"cal-col"},[a("div",{staticClass:"cal-btn cal-ok",attrs:{eventid:"1"},on:{click:t.submit}},[a("span",[t._v("ok")])])])],2)])])};s._withStripped=!0;var n={render:s,staticRenderFns:[]};e.a=n},577:function(t,e,a){"use strict";var s=a(579),n=a(580),c=!1;var o=function(t){c||a(578)},i=a(17)(s.a,n.a,o,null,null);i.options.__file="src\\components\\add\\scrollSelector.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] scrollSelector.vue: functional components are not supported with templates, they should use render functions."),e.a=i.exports},578:function(t,e){},579:function(t,e,a){"use strict";e.a={data:function(){return{value:[0,0],colCount:2,cols:[],type:"custom",closeFlag:!0}},methods:{open:function(){this.closeFlag=!1,this.$emit("res",this.value,this.type)},close:function(){this.closeFlag=!0},dateMode:function(t){this.type="date";for(var e=null===t?2050:Number(t[0]),a=null===t?12:Number(t[1]),s=null===t?31:Number(t[2]),n=[],c=[],o=2010;o<e+1;o++)c.push(o),n.push({name:o});for(var i=[],r=[],l=0;l<a;l++)r.push(l+1),i.push({name:l+1});for(var u=[],d=[],h=0;h<s;h++)d.push(h+1),u.push({name:h+1});if(this.colCount=3,this.cols=[n,i,u],null===t){var m=new Date;this.value=[c.indexOf(m.getFullYear()),r.indexOf(m.getMonth()+1),d.indexOf(m.getDate())]}else this.value=[c.indexOf(parseInt(t[0])),r.indexOf(parseInt(t[1])),d.indexOf(parseInt(t[2]))]},dateSelect:function(t){for(var e=new Date,a=[],s=0;s<12;s++)a.push({name:s+1});if(t[0]===this.cols[0].length-1){var n=e.getMonth()+1;this.cols.splice(1,1,a.slice(0,n))}else this.cols.splice(1,1,a.slice(0,12));for(var c=[],o=0;o<31;o++)c.push({name:o+1});for(var i=0;i<this.cols.length;i++)t[i]>this.cols[i].length-1&&(t[i]=this.cols[i].length-1);-1!==[4,6,9,11].indexOf(this.cols[1][t[1]].name)?this.cols.splice(2,1,c.slice(0,30)):-1!==[1,3,5,7,8,10,12].indexOf(this.cols[1][t[1]].name)?this.cols.splice(2,1,c):this.cols[0][t[0]].name%4==0?this.cols.splice(2,1,c.slice(0,29)):this.cols.splice(2,1,c.slice(0,28)),t[0]===this.cols[0].length-1&&t[1]===this.cols[1].length-1&&this.cols.splice(2,1,c.slice(0,e.getDate()))},bindChange:function(t){if(!this.closeFlag){for(var e=t.target.value,a=0;a<e.length;a++)if(this.value[a]!==t.target.value[a]){this.value[a]=e[a];for(var s=a+1;s<e.length;s++)this.value[s]=0;break}"date"===this.type?(this.dateSelect(e),this.$emit("res",this.value,this.type)):"custom"===this.type&&this.$emit("res",this.value,this.type)}}}}},580:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("picker-view",{staticClass:"picker-view",attrs:{value:t.value,"indicator-style":"height: 50px;","indicator-class":"picker-view-indicator",eventid:"0"},on:{change:t.bindChange}},t._l(t.cols,function(e,s){return a("picker-view-column",{key:s,staticClass:"picker-view-col",attrs:{mpcomid:"0_"+s}},t._l(e,function(e,s){return a("view",{key:s},[t._v(t._s(e.name))])}))}))],1)};s._withStripped=!0;var n={render:s,staticRenderFns:[]};e.a=n},581:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-container"},[a("div",{staticClass:"edit-items",attrs:{eventid:"6"},on:{click:t.deactivateTools}},[a("div",{staticClass:"edit-item-tip"},[t._v("——·   收支金额   ·——")]),t._v(" "),a("div",{staticClass:"edit-item-val-type",attrs:{eventid:"0"},on:{click:function(e){e.stopPropagation(),t.callCalculator(e)},touchstart:t.touchStart,touchend:t.touchEnd}},[a("div",{class:0===t.accountItem.record_type?"edit-item-type out":"edit-item-type in"},[t._v(t._s(0===t.accountItem.record_type?"支出":"收入"))]),t._v(" "),a("div",{class:0===t.accountItem.record_type?"edit-item-value out":"edit-item-value in"},[t._v(t._s(t.accountItem.record_value))])]),t._v(" "),a("div",{staticClass:"edit-item-tip"},[t._v("——·   分类   ·——")]),t._v(" "),a("div",{staticClass:"edit-item-cat",attrs:{eventid:"1"},on:{click:function(e){e.stopPropagation(),t.callCatSelector(e)}}},[a("div",[t._v(t._s(t.accountItem.category))]),t._v(" "),a("div",[t._v(">")]),t._v(" "),a("div",[t._v(t._s(t.accountItem.subcategory))])]),t._v(" "),a("div",{staticClass:"edit-item-tip"},[t._v("——·   日期   ·——")]),t._v(" "),a("div",{staticClass:"edit-item-cat",attrs:{eventid:"2"},on:{click:function(e){e.stopPropagation(),t.callDateSelector(e)}}},[a("div",[t._v(t._s(t.accountItem.record_date))])]),t._v(" "),a("div",{staticClass:"edit-item-tip"},[t._v("——·   描述   ·——")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.accountItem.record_desc,expression:"accountItem.record_desc"}],staticClass:"edit-item-desc",attrs:{placeholder:"输入一些描述吧...",eventid:"3"},domProps:{value:t.accountItem.record_desc},on:{input:function(e){e.target.composing||(t.accountItem.record_desc=e.target.value)}}}),t._v(" "),a("div",{staticClass:"edit-item-tip"},[t._v("——·   支付方式   ·——")]),t._v(" "),a("div",{staticClass:"edit-item-pay"},[a("ul",t._l(t.payMethod,function(e,s){return a("li",{key:s,class:e.isSelected?"pay":"deactivate-pay pay",style:"background-color:"+e.color,attrs:{eventid:"4_"+s},on:{click:function(e){t.activatePay(s)}}},[t._v(t._s(e.payCn)+"\n        ")])}))],1),t._v(" "),a("div",{staticClass:"log",attrs:{eventid:"5"},on:{click:t.submit}},[t._v("记账!")])]),t._v(" "),a("div",{staticClass:"cal-root"},[t.showCalculator?a("calculator",{attrs:{eventid:"7",mpcomid:"0"},on:{res:t.getCalRes}}):t._e()],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showSelector,expression:"showSelector"}],staticClass:"cal-root"},[a("scroll-selector",{ref:"selector",attrs:{eventid:"8",mpcomid:"1"},on:{res:t.getSelectRes}})],1)])};s._withStripped=!0;var n={render:s,staticRenderFns:[]};e.a=n}},[543]);